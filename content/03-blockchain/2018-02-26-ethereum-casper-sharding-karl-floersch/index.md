---
title: "สรุปทอล์ก Ethereum, Casper และ Sharding โดย Karl Floersch"
date: 2018-02-26T12:00:00+07:00
tags: ["tech", "blockchain", "ethereum"]
language: "thai"
# Alias is used to redirect from old urls used by the previous template
aliases: ["/posts/2018-02-26-ethereum-casper-sharding-karl-floersch"]
---

# สรุปทอล์ก Ethereum, Casper และ Sharding โดย Karl Floersch

_Originally published at [blog.omisego.network](https://blog.omisego.network/%E0%B8%AA%E0%B8%A3%E0%B8%B8%E0%B8%9B%E0%B8%97%E0%B8%AD%E0%B8%A5%E0%B9%8C%E0%B8%81-ethereum-casper-%E0%B9%81%E0%B8%A5%E0%B8%B0-sharding-%E0%B9%82%E0%B8%94%E0%B8%A2-karl-floersch-fed1f630002a)_

{{<figure src="resources/01-meetup-cover.png">}}

เมื่อวานผมมีโอกาสไปร่วมงาน Asia-Pacific Ethereum Community Meetup ที่ตึก KX ของ ม.พระจอมเกล้าฯ บางมด ช่วงเช้ามีทอล์กของคุณ Karl Floersch ที่น่าจะเป็นทอล์กที่คนประทับใจมากที่สุดของวันนั้น(เคียงข้างทอล์กของ Vitalik Buterin) เลยอยากเขียนสรุปมาแบ่งปันให้เพื่อน ๆ ที่สนใจเกี่ยวกับพัฒนาการในอนาคตอันใกล้ของ Ethereum ครับ

ทอล์กของคุณ Karl Floersch แบ่งออกเป็น 3 ส่วน ซึ่งเป็น 3 องค์ประกอบหลักของ Ethereum ในอนาคตอันใกล้ ดังนี้:

1. **Ethereum**
2. **Casper**
3. **Sharding**

{{<figure src="resources/02-karl.jpeg">}}

## Part 1: Ethereum

- คนส่วนใหญ่ถ้าเคยได้ยินคำว่า Ethereum น่าจะเข้าใจว่ามันคือคอมพิวเตอร์ที่ร่วมกันประมวลผลทั่วโลก (World’s computer) หรือแพลตฟอร์มสำหรับทำ ICO แต่จริง ๆ แล้วมีคำนิยาม Ethereum ที่ดีกว่านั้น
- คุณ Karl กล่าวถึงเหตุการณ์แบล็คสวอน (Black Swan) หรือเหตุการณ์ร้ายแรงที่มีผลกระทบต่อระบบหรือองค์กรอย่างสิ้นเชิง แต่โอกาสที่จะเกิดขึ้นนั้นมีน้อยมาก ๆ เหมือนการค้นพบห่านที่มีสีดำ โดยมีอยู่ 3 เหตุการณ์ที่เป็นชนวนให้เกิด Ethereum ขึ้น:
- **Black Swan 1:** วิกฤตแฮมเบอร์เกอร์เมื่อปี 2008 ที่สถาบันการเงินในอเมริกาล้มลงเนื่องจากหนี้เสียจำนวนมาก จนรัฐบาลต้องออกมาอุ้มแต่นายแบงก์ก็ลอยนวลไปด้วยกำไรมหาศาล โดยที่เรามองไม่เห็นว่าพวกเขาทำอะไรกันอยู่ ไม่รู้ว่าเขาบริหารเงินของเราอย่างไร และเราไม่มีสิทธิ์เรียกร้องใด ๆ ทั้งสิ้น ทำให้ประชาชนจำนวนมากหมดศรัทธากับระบบการเงินแบบศูนย์กลาง
- **Black Swan 2:** Vitalik Buterin ผู้ร่วมก่อตั้ง Ethereum ผู้ชื่นชอบเล่น Warlock (Lvl. 60) ใน Word of Warcraft วันหนึ่งเจ้าของเกมอยู่ดี ๆ ก็ประกาศยกเลิกตัว Warlock ที่เขาเล่น เป็นการตอกย้ำถึงความย่ำแย่ของการบริหารแบบใช้ศูนย์กลาง (อันนี้เป็นตัวอย่างขำ ๆ)
- **Black Swan 3:** Twitter อยู่ดี ๆ ก็ปิด API ตนเอง ไม่ให้นักพัฒนาที่ทำแอพเชื่อมต่อกับทวิตเตอร์ดึงข้อมูลได้ ทำให้หลาย ๆ แอพที่ถูกใช้อย่างกว้างขวางต้องปิดตัวลงอย่างถาวร
- Ethereum จึงถูกสร้างขึ้นเพื่อให้เป็นระบบที่ทุกคนสามารถมีส่วนร่วม และตรวจสอบการทำงานภายในของมันได้ สามารถเชื่อใจในตัวระบบได้ว่าโค้ดที่เราเห็น ไม่ว่าจะเป็นโค้ดที่ใช้ส่งเหรียญ ETH ไปมา หรือ Smart Contract ต่าง ๆ จะถูกรันตามนั้นจริง ๆ และไม่มีใครมีสิทธิ์ที่จะล้มล้างกฎเกณฑ์ที่เขียนไว้ในโค้ดได้ (Vitalik เลือกที่จะไม่ต่อยอดจาก Bitcoin เนื่องจากปัญหาเสถียรภาพของทีม Bitcoin)
- ทีม Ethereum เชื่อว่า การที่จะลดจำนวนเหตุการณ์แบล็คสวอนได้นั้นอยู่ที่การขีดเส้นขอบเขตอำนาจนั้นอย่างชัดเจน และทำให้เส้นอำนาจนั้นสามารถถูกตรวจสอบได้โดยคนจำนวนมาก
- ICO และ Cryptokitties พิสูจน์ให้เห็นว่าเราสามารถใช้ เศรษฐศาสตร์คริปโต (cryptoeconomics) ในการสร้างความเชื่อใจกันระหว่างคนที่ไม่รู้จักกันได้ แต่ 2 สิ่งนั้นเป็นเพียงก้าวแรกที่น่าเบื่อเท่านั้น (boring first steps)
- คุณ Karl จึงนิยาม Ethereum ว่าเป็นแพลตฟอร์มสำหรับการประมวลผลทั่วไปที่สร้างสภาพแวดล้อมที่เอื้อต่อการบังคับใช้สัญญาอิเล็กทรอนิกส์ โดยที่เราสามารถเชื่อใจได้ว่าข้อสัญญาที่เขียนขึ้นด้วยโค้ดนั้นจะถูกบังคับใช้อย่างถูกต้อง

{{<figure src="resources/03-what-is-ethereum.png">}}

## Part 2: Casper

- **ปัญหาของ Proof of Work:** หลาย ๆ คนที่ติดตามข่าวสารบล็อกเชนน่าจะทราบกันดีว่าหนึ่งในข้อด้อยของบล็อกเชนในปัจจุบันคือการที่เหล่า validators (ผู้ตรวจสอบธุรกรรม) ต้องใช้พลังงานปริมาณมหาศาลเพื่อแข่งกันคำนวณโจทย์ทางคณิตศาสตร์ ใครที่ตอบโจทย์ได้เป็นคนแรก คนนั้นจะได้ค่าธรรมเนียมธุรกรรมนั้นไป (Proof of Work) ทำให้ทุกคนมีต้นทุนในการร่วมวง และมีความเสี่ยงในการเสียต้นทุน(ค่าไฟ)นั้นไป หากพยายามเล่นตุกติกกับระบบแล้วคนอื่นจับได้
- **Proof of Stake คือคำตอบ:** ในระบบ Proof of Stake (ภายใต้โค้ดเนม Casper) แทนที่ validators จะแข่งกันโดยการผลาญไฟฟ้า ลอจิคของ Casper จะให้ validator วางเดิมพัน/มัดจำ เช่น ETH เพื่อเป็นคำสัญญาว่าจะประพฤติดี แล้วตัว Casper จะสุ่ม validator ขึ้นมาจำนวนหนึ่งเพื่อทำการโหวต หากมีการพยายามโกงโหวตเกิดขึ้นและ validator ถูกโหวตออก แทนที่คนโกงจะเสียค่าไฟฟ้าที่ใช้ในการคำนวณ (ซึ่งมีผลกระทบทางธรรมชาติ และทำให้ราคาไฟฟ้าสูงขึ้นสำหรับทุกคน) ก็จะเสีย ETH ที่วางเดิมพันไว้แทน ซึ่งเป็นวิธีการที่ Ethereum ได้เลือกที่จะใช้เพื่อเป็นแรงจูงใจให้คนประพฤติดีโดยไม่เสียทรัพยากรโลกโดยใช่เหตุ

{{<figure src="resources/04-casper-finality.gif" title="สเต็ปปกติในการโหวตบน Casper">}}

ซึ่งการ validate ด้วย Proof of Stake ก็มีปัญหาของมันเอง หลัก ๆ คือ Double Vote และ Surround Vote:

{{<figure src="resources/05-casper-slashing-1.gif" title="เดิมพันจะถูกหักจากคนที่พยายามจะโหวตหลายบล็อกพร้อมกัน">}}

ส่วน Surround Vote นั้น คุณ Karl ข้ามไป จึงไม่แน่ใจว่าจริง ๆ แล้วมันทำงานยังไง (อ้าว งงด้วยคน)

{{<figure src="resources/06-casper-slashing-2.gif" title="เดิมพันจะถูกหักจากคนที่เคยโหวตบล็อกหนึ่งไปแล้ว แต่บล็อกต่อมาขัดแย้งกับที่เคยโหวตไป">}}

เมื่อนำทั้งการป้องกัน double vote และ surround vote มารวมกัน ก็จะเห็นภาพบล็อกทุจริตที่ถูกตีตกตามภาพด้านล่างนี้

{{<figure src="resources/07-casper-checkpoints.gif" title="ตัวอย่างการโจมตีที่ล้มเหลวถึงแม้ height ของผู้โจมตีจะอยู่สูงกว่า เพราะบล็อกปลอมจะเข้าข่าย slashing conditions">}}

## Part 3: Sharding

- คุณ Karl กล่าวว่า Sharding คือสปอตไลต์ของบล็อกเชนในปี 2018 เพราะปัจจุบันบล็อกเชนมีปัญหาด้าน scalability อย่างมาก
- ในความเป็นจริง เราสามารถสเกลบล็อกเชนได้การใช้บล็อกที่ใหญ่ขึ้น ใช้คอมพิวเตอร์ที่แรงขึ้น แต่จุดประสงค์ของ decentralized network คือการทำให้ทุกคนบนโลกสามารถมีส่วนร่วมในระบบนี้ได้ การสเกลด้วยคอมพิวเตอร์ที่ใหญ่ขึ้นนั่นหมายถึงการทำให้คนจำนวนน้อยลงสามารถมีส่วนร่วมกับระบบได้ ซึ่งไม่ตอบโจทย์การทำ decentralized network อย่างแน่นอน
- Sharding ในเฟสแรกจะมี 100 shards (แบ่งข้อมูลทั้งหมดออกเป็น 100 ส่วน)
- Validators ของแต่ละ shard จะถูกสุ่มขึ้นมาล่วงหน้า 5 บล็อกเพื่อให้เวลาดาว์นโหลดข้อมูลล่าสุดของ shard ที่ต้องตรวจสอบ
- Validators ของแต่ละ shard จะสร้าง collation header ซึ่งเป็นเหมือน block header ไว้เก็บข้อมูลสรุปของ shard นั้น ๆ แล้วส่งไปเก็บรักษาที่ root chain อีกที
- ทีม Ethereum เชื่อว่า ด้วยโปรเจกต์ที่กำลังดำเนินการอยู่ ทั้ง Casper, Sharding, Plasma และการออกแบบเศรษฐศาสตร์คริปโต จะทำให้เกิดแอพพลิเคชั่นที่ไม่มีศูนย์กลางและสเกลได้อย่างกว้างขวางเกิดขึ้นได้จริงๆ
- ตัว Sharding เองพลิกแพลงได้ไม่มาก แต่อีกส่วนหนึ่งที่จะทำให้การสเกลเกิดขึ้นได้จริงคือการให้ความรู้กับผู้ที่เขียน smart contract เพราะเทรนด์ตอนนี้คือการเขียน smart contract ที่ใหญ่สโคปขึ้นเรื่อย ๆ ซึ่งไม่จำเป็น เช่น เราต้องการสร้างระบบจัดเก็บรูปที่บิดเบือนไม่ได้ เราไม่จำเป็นต้องเซฟรูปไว้บนบล็อกเชน เราจะใส่เฉพาะ hash ของรูปนั้นแล้วเก็บข้อมูลไฟล์ไว้ที่ AWS ก็ยังได้ หรือจริง ๆ แล้วการเซฟรูปไว้ที่อื่น hash รูปทั้งหมดเข้าด้วยกัน และบันทึกเพียง hash เดียวไว้บนบล็อกเชนก็ยังได้เลย

{{<figure src="resources/08-casper-sharding-phase-1.gif" title="ตัวอย่างการทำงานของ Sharding">}}

## Q&A

ในช่วง Q&A คุณ Karl ได้ตอบคำถามที่ผมคิดว่าน่าสนใจอยู่ 2 คำถาม นั่นคือ

### Q: คุณคิดว่าจะมีเหตุการณ์ hard fork เพื่อแก้ไขการถูกแฮกอย่างที่เกิดขึ้นกับ DAO เมื่อปีที่แล้ว (2016) ที่กู้คืนเงินกว่าพันล้านบาทคืนอีกหรือไม่?

A: ผมคิดว่าจะไม่มีเหตุการณ์ hard fork เพื่อแก้ไขการถูกแฮกเกิดขี้นอีก เพราะ ณ วันนี้เรามีผู้ร่วมในระบบเราเยอะขึ้นมาก ๆ ซึ่งแปลว่าการตกลงทำ hard fork เพื่อเหตุการณ์แบบนี้จะเกิดขึ้นยากขึ้นเรื่อย ๆ ซึ่งเป็นเรื่องดีเพราะแปลว่าระบบจะมีความแน่นอนมากยิ่งขึ้น

### Q: อะไรคือแรงที่ทำให้คุณหันมาสร้าง Ethereum ซึ่งเป็นกิจกรรมที่แตกต่างไปจากวัยรุ่นทั่วไปทำมาก ๆ ? (คุณ Karl เพิ่งอายุ 24 ในวันที่เขาขึ้นพูดเมื่อวาน)

A: ผมคิดว่ามนุษยชาติของเรากำลังไปได้ค่อนข้างดีนะ แต่อินเทอร์เน็ตเองก็สร้างความท้าทายใหม่ ๆ ขึ้นมามากมายให้เราต้องจัดการ ยิ่งนับวันเรายิ่งเห็นองค์กรจำนวนน้อยลงแต่องค์กรเหล่านี้ผูกขาดอินเทอร์เน็ตมากขึ้นและมีอำนาจอย่างมหาศาล ในขณะที่เราก็กำลังย้ายชีวิตของเราขึ้นไปอยู่บนโลกออนไลน์มากขึ้น มันจึงสำคัญมากที่เราจะต้องทำให้อินเทอร์เน็ตเป็นพื้นที่เปิด และเป็นเจ้าของร่วมกันโดยทุกคน ไม่ใช่มีคนไม่กี่คนที่สามารถบังคับสวิตช์ได้ตามใจชอบ และถึงแม้เราจะขีดเส้นกำกับอำนาจศูนย์กลางได้ แต่ถ้าคนดูแลเส้นนั้นมีแต่คนที่อยู่ในซิลิคอนวัลเลย์ เราก็จะได้อำนาจแบบซิลิคอนวัลเลย์ มันจึงจำเป็นมากที่เราจะต้องทำให้อำนาจนี้กระจายออกไปให้ได้มากที่สุด ให้ทุกคนบนโลกได้เป็นเจ้าของระบบนี้ไปด้วยกัน

อ้างอิง: https://youtu.be/jpmaMMAUDU0?t=1h2m55s
